<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_sg_write_back_action_item">
    <sys_sg_write_back_action_item action="INSERT_OR_UPDATE">
        <description>Log time worked on the current task.</description>
        <execution_script><![CDATA[//This script takes user input and converts it to a Time Worked entry.

(function WriteBackAction(input) {
	
	gs.info("Input: " + JSON.stringify(input));
	
    //First check to see if user inputted data is valid
	if ((gs.nil(input.time_worked_hours) && gs.nil(input.time_worked_minutes)) || 
		input.time_worked_hours > 99 || input.time_worked_minutes > 99 || 
		input.time_worked_hours < 0 || input.time_worked_minutes < 0 ||
		(input.time_worked_hours == 0  && input.time_worked_minutes == 0)) {
			gs.addErrorMessage(gs.getMessage("Invalid time worked entry. Please enter a new value."));
	}
	
	//Gather the user input
	var hours= input.time_worked_hours ;
	var minutes = input.time_worked_minutes;
	
	//The time worked field needs 2 digits for entry. If hours < 10, append a 0 in the front
	if (hours< 10) {
		hours = '0' + hours;
	}
	
	//same for minutes
	if (minutes < 10) {
		minutes = '0' + minutes;
	}
	
	//set time worked with format D:HH:MM
	var timeWorked = new GlideDuration('0' + hours + ':' + minutes + ':00');
	
	//take the time worked and the user inputs and create a new record on the Time Worked table
	var logTime = new GlideRecord("task_time_worked");
	logTime.initialize();
	logTime.task = input.task_id;
	logTime.user = gs.getUserID();
	logTime.u_computer_repair_state = input.category;
	logTime.time_worked = timeWorked;
	logTime.comments = input.comments;
	logTime.insert();
	
})(input);]]></execution_script>
        <name>Log Time Worked</name>
        <parameter_screen/>
        <query_condition/>
        <sys_class_name>sys_sg_write_back_action_item</sys_class_name>
        <sys_created_by>da837122</sys_created_by>
        <sys_created_on>2020-04-16 13:24:59</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>c1d11c58dbd49c9096b0fb37bf9619c1</sys_id>
        <sys_mod_count>18</sys_mod_count>
        <sys_name>Log Time Worked</sys_name>
        <sys_package display_value="Tasks" source="x_uocf_tasks">4b2d1f61db88d09096b0fb37bf96190a</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Tasks">4b2d1f61db88d09096b0fb37bf96190a</sys_scope>
        <sys_update_name>sys_sg_write_back_action_item_c1d11c58dbd49c9096b0fb37bf9619c1</sys_update_name>
        <sys_updated_by>da837122</sys_updated_by>
        <sys_updated_on>2021-04-02 15:16:44</sys_updated_on>
        <table>sc_task</table>
        <template>time_worked=javascript:gs.getDurationDate('0 0:30:0')^EQ</template>
        <type>script</type>
        <use_current_record_as_condition>false</use_current_record_as_condition>
        <use_fields_for_ref_lookup>false</use_fields_for_ref_lookup>
    </sys_sg_write_back_action_item>
</record_update>
